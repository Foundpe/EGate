<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Minhook-Auth // Dashboard</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { 
            ka: { 
              bg: '#0b0b0b',        
              panel: '#111111',     
              border: '#1c1c1c',    
              accent: '#dc2626',    // ROJO Minhook
              accentHover: '#b91c1c', 
              text: '#e1e1e1',
              muted: '#666666'
            }
          },
          fontFamily: { 
            sans: ['Poppins', 'sans-serif'], 
            mono: ['Consolas', 'monospace'],
          },
          animation: { 'fade-in': 'fadeIn 0.3s ease-out' },
          keyframes: {
            fadeIn: { '0%': { opacity: '0', transform: 'translateY(5px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } }
          }
        }
      }
    }
  </script>

  <style>
    body {
      background-color: #0b0b0b;
      color: #e1e1e1;
      font-family: 'Poppins', sans-serif;
      overflow: hidden; 
    }

    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #0b0b0b; }
    ::-webkit-scrollbar-thumb { background: #1c1c1c; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #dc2626; } 
    
    .ka-panel {
      background-color: #111111;
      border: 1px solid #1c1c1c;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
    }
    
    .ka-input {
      background-color: #0b0b0b;
      border: 1px solid #1c1c1c;
      color: #fff;
      font-size: 0.85rem;
      transition: all 0.2s ease;
    }
    .ka-input:focus { outline: none; border-color: #dc2626; box-shadow: 0 0 10px rgba(220, 38, 38, 0.2); }
    
    .ka-btn {
      background-color: #dc2626; 
      color: white;
      transition: all 0.2s;
      font-weight: 500;
      font-size: 0.85rem;
    }
    .ka-btn:hover { background-color: #b91c1c; transform: translateY(-1px); box-shadow: 0 0 15px rgba(220, 38, 38, 0.4); }
    .ka-btn:active { transform: translateY(0); }

    .sidebar-link {
      color: #888;
      transition: all 0.2s;
      font-size: 0.9rem;
      border-left: 3px solid transparent;
    }
    .sidebar-link:hover { color: #fff; background: #161616; }
    .sidebar-link.active { color: #fff; background: #161616; border-left-color: #dc2626; } 
    
    .noselect { user-select: none; }
    
    /* Checkbox personalizado */
    .custom-checkbox {
        accent-color: #dc2626;
        cursor: pointer;
        width: 16px;
        height: 16px;
    }

    /* Tabla */
    table { width: 100%; border-collapse: separate; border-spacing: 0; }
    th { text-align: left; padding: 12px 16px; color: #666; font-size: 0.75rem; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid #1c1c1c; }
    td { padding: 12px 16px; border-bottom: 1px solid #1c1c1c; font-size: 0.85rem; }
    tr:last-child td { border-bottom: none; }
    tr:hover td { background-color: #161616; }
  </style>
</head>
<body class="flex h-screen antialiased noselect">

<div id="auth-layer" class="fixed inset-0 z-50 flex items-center justify-center bg-[#050505] transition-all duration-500">
  <div class="ka-panel p-8 rounded-lg w-full max-w-sm text-center relative border-t-2 border-ka-accent shadow-[0_0_30px_rgba(220,38,38,0.15)]">
    <div class="mb-8">
      <i class="fa-solid fa-fingerprint text-4xl text-ka-accent mb-4"></i>
      <h1 class="text-2xl font-bold text-white tracking-wide">Minhook-Auth</h1>
      <p class="text-xs text-ka-muted mt-1 uppercase tracking-widest">Secure Dashboard</p>
    </div>
    <div class="space-y-4">
      <input id="adminPass" type="password" class="ka-input w-full p-3 rounded text-center placeholder-gray-600" placeholder="Enter Key: admin">
      <button onclick="attemptLogin()" class="ka-btn w-full py-3 rounded shadow-lg shadow-red-900/20">Login</button>
    </div>
    <p id="loginMsg" class="mt-4 text-xs font-mono h-4 text-red-500"></p>
  </div>
</div>

<div id="edit-modal" class="fixed inset-0 z-40 hidden items-center justify-center bg-black/80 backdrop-blur-sm transition-opacity duration-300">
    <div class="ka-panel w-full max-w-md p-6 rounded-lg border border-ka-border shadow-[0_0_50px_rgba(0,0,0,0.8)] transform scale-100 animate-fade-in relative">
        <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white"><i class="fa-solid fa-xmark"></i></button>
        
        <div class="text-center mb-6">
            <div class="w-12 h-12 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-3 border border-red-500/30">
                <i class="fa-solid fa-clock text-ka-accent text-xl"></i>
            </div>
            <h3 class="text-xl font-bold text-white">Extend Subscription</h3>
            <p class="text-xs text-ka-muted mt-1">Editing time for <span id="modal-username" class="text-ka-accent">User</span></p>
        </div>

        <div class="space-y-4">
            <div>
                <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Days Remaining</label>
                <input type="number" id="edit-days-input" class="ka-input w-full p-3 rounded" placeholder="Enter days">
            </div>
            
            <div class="flex gap-3 mt-6">
                <button onclick="closeModal()" class="w-1/2 py-2 rounded border border-ka-border text-gray-400 hover:text-white hover:border-gray-500 transition-colors text-sm">Cancel</button>
                <button onclick="saveUserTime()" class="ka-btn w-1/2 py-2 rounded text-sm shadow-lg shadow-red-900/20">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<aside class="w-64 bg-[#111111] border-r border-[#1c1c1c] flex flex-col z-10">
  <div class="h-16 flex items-center px-6 border-b border-[#1c1c1c]">
    <i class="fa-solid fa-shield-cat text-ka-accent text-xl mr-3"></i>
    <span class="font-bold text-lg tracking-wide">Minhook</span>
    <span class="ml-auto text-[10px] bg-red-900/20 text-red-400 px-2 py-0.5 rounded border border-red-900/50">V1.3</span>
  </div>

  <div class="p-4">
      <p class="text-[10px] text-[#444] font-bold uppercase mb-2 pl-3">Main</p>
      <nav class="space-y-1">
        <button onclick="switchTab('generate')" id="nav-generate" class="sidebar-link w-full flex items-center px-4 py-3 rounded active">
            <i class="fa-solid fa-ticket w-6"></i> <span>Licenses</span>
        </button>
        <button onclick="switchTab('users')" id="nav-users" class="sidebar-link w-full flex items-center px-4 py-3 rounded">
            <i class="fa-solid fa-users w-6"></i> <span>Users</span>
        </button>
        <button onclick="switchTab('tools')" id="nav-tools" class="sidebar-link w-full flex items-center px-4 py-3 rounded">
            <i class="fa-solid fa-screwdriver-wrench w-6"></i> <span>Tools</span>
        </button>
      </nav>
  </div>

  <div class="mt-auto p-4 border-t border-[#1c1c1c]">
    <div class="flex items-center gap-3">
        <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-red-600 to-red-900 flex items-center justify-center text-xs font-bold border border-red-500/30">A</div>
        <div>
            <p class="text-xs font-bold text-white">Administrator</p>
            <p class="text-[10px] text-gray-500">Admin Access</p>
        </div>
        <button onclick="location.reload()" class="ml-auto text-gray-500 hover:text-red-500"><i class="fa-solid fa-right-from-bracket"></i></button>
    </div>
  </div>
</aside>

<main class="flex-1 flex flex-col bg-[#0b0b0b] relative">
  <header class="h-16 border-b border-[#1c1c1c] bg-[#111111] flex items-center justify-between px-8">
      <h2 id="page-title" class="font-semibold text-sm text-gray-300">License Generation</h2>
      <div class="flex items-center gap-4">
          <div class="flex items-center gap-2 text-xs text-gray-500 bg-[#0b0b0b] px-3 py-1.5 rounded border border-[#1c1c1c]">
              <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
              <span>System Online</span>
          </div>
      </div>
  </header>

  <div class="flex-1 overflow-y-auto p-8 relative">
      
      <div id="tab-generate" class="animate-fade-in max-w-4xl mx-auto">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
              <div class="ka-panel p-5 rounded border-l-2 border-ka-accent">
                  <p class="text-gray-500 text-xs uppercase font-bold">Total Keys</p>
                  <p class="text-2xl font-bold text-white mt-1">1,248</p>
              </div>
              <div class="ka-panel p-5 rounded border-l-2 border-green-600">
                  <p class="text-gray-500 text-xs uppercase font-bold">Active Users</p>
                  <p class="text-2xl font-bold text-white mt-1">843</p>
              </div>
              <div class="ka-panel p-5 rounded border-l-2 border-yellow-600">
                  <p class="text-gray-500 text-xs uppercase font-bold">Banned</p>
                  <p class="text-2xl font-bold text-white mt-1">42</p>
              </div>
          </div>

          <div class="ka-panel p-6 rounded-lg">
              <h3 class="text-lg font-semibold mb-6 flex items-center gap-2">
                  <i class="fa-solid fa-plus text-ka-accent"></i> Create Licenses
              </h3>
              <div class="grid grid-cols-2 gap-4 mb-4">
                  <div>
                      <label class="block text-xs text-gray-500 mb-2">Duration (Days)</label>
                      <select id="gen-days" class="ka-input w-full p-3 rounded">
                          <option value="1">1 Day</option>
                          <option value="7">7 Days</option>
                          <option value="30">30 Days</option>
                          <option value="365">Lifetime</option>
                      </select>
                  </div>
                  <div>
                      <label class="block text-xs text-gray-500 mb-2">Amount</label>
                      <input type="number" id="gen-amount" class="ka-input w-full p-3 rounded" value="1" min="1" max="50">
                  </div>
              </div>
              <div class="mb-6">
                   <label class="block text-xs text-gray-500 mb-2">Key Level</label>
                   <select class="ka-input w-full p-3 rounded">
                       <option>Premium</option>
                       <option>Developer</option>
                       <option>Trial</option>
                   </select>
              </div>
              <button onclick="generateKeys()" class="ka-btn w-full py-3 rounded shadow-lg shadow-red-900/10">
                  <i class="fa-solid fa-bolt mr-2"></i> Generate Keys
              </button>

              <div id="output-area" class="mt-6 hidden">
                  <label class="block text-xs text-gray-500 mb-2">Generated Output</label>
                  <textarea id="keys-output" class="ka-input w-full p-3 rounded h-32 font-mono text-xs text-green-400" readonly></textarea>
              </div>
          </div>
      </div>

      <div id="tab-users" class="hidden animate-fade-in">
          <div class="ka-panel rounded-lg overflow-hidden border border-[#1c1c1c]">
              <div class="p-4 border-b border-[#1c1c1c] flex justify-between items-center bg-[#111111]">
                  <div class="flex items-center gap-3">
                      <div class="relative">
                          <i class="fa-solid fa-magnifying-glass absolute left-3 top-2.5 text-gray-600 text-xs"></i>
                          <input type="text" placeholder="Search user..." class="ka-input pl-8 pr-3 py-2 rounded text-xs w-64 border-none bg-[#0b0b0b]">
                      </div>
                  </div>
                  <button onclick="deleteSelected()" class="bg-red-900/20 hover:bg-red-900/40 text-red-500 border border-red-900/50 px-4 py-2 rounded text-xs font-semibold transition-all">
                      <i class="fa-solid fa-trash mr-1"></i> Delete Selected
                  </button>
              </div>
              
              <div class="overflow-x-auto">
                  <table class="w-full">
                      <thead>
                          <tr class="bg-[#0f0f0f]">
                              <th style="width: 40px;"><input type="checkbox" id="select-all" class="custom-checkbox" onclick="toggleSelectAll()"></th>
                              <th>User</th>
                              <th>HWID</th>
                              <th>IP Address</th>
                              <th>Expires In</th>
                              <th class="text-right">Action</th>
                          </tr>
                      </thead>
                      <tbody id="users-table-body">
                          </tbody>
                  </table>
              </div>
          </div>
      </div>

      <div id="tab-tools" class="hidden animate-fade-in max-w-2xl mx-auto text-center mt-20">
          <i class="fa-solid fa-toolbox text-6xl text-[#1c1c1c] mb-4"></i>
          <h3 class="text-xl font-bold text-gray-500">System Tools</h3>
          <p class="text-gray-600 text-sm mt-2">HWID Reset and Blacklist manager coming soon.</p>
      </div>

  </div>
</main>

<script>
    // --- AUTH LOGIC REPARADO ---
    function attemptLogin() {
        const pass = document.getElementById('adminPass').value;
        const layer = document.getElementById('auth-layer');
        const msg = document.getElementById('loginMsg');
        
        // --- CONFIGURA TU KEY AQUÃ ---
        const masterKey = "admin"; // CAMBIA ESTO POR TU KEY
        
        if(pass === masterKey) {
            layer.style.opacity = '0';
            setTimeout(() => { layer.style.display = 'none'; }, 500);
        } else {
            msg.innerText = 'Access Denied: Invalid Key';
            document.getElementById('adminPass').classList.add('border-red-500');
            document.getElementById('adminPass').value = ''; // Limpiar input
        }
    }

    // Permitir Login con ENTER
    document.getElementById('adminPass').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            attemptLogin();
        }
    });

    // --- TABS LOGIC ---
    function switchTab(tabName) {
        ['generate', 'users', 'tools'].forEach(t => {
            document.getElementById('tab-' + t).classList.add('hidden');
            document.getElementById('nav-' + t).classList.remove('active');
        });
        document.getElementById('tab-' + tabName).classList.remove('hidden');
        document.getElementById('nav-' + tabName).classList.add('active');
        
        const titles = { 'generate': 'License Generation', 'users': 'User Management', 'tools': 'System Tools' };
        document.getElementById('page-title').innerText = titles[tabName];
    }

    // --- KEY GEN LOGIC ---
    function generateKeys() {
        const amount = document.getElementById('gen-amount').value;
        const output = document.getElementById('keys-output');
        const area = document.getElementById('output-area');
        
        let keys = "";
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        
        for(let i=0; i<amount; i++) {
            let key = "MINHOOK-";
            for(let j=0; j<4; j++) {
                for(let k=0; k<4; k++) key += chars.charAt(Math.floor(Math.random() * chars.length));
                if(j<3) key += "-";
            }
            keys += key + "\n";
        }
        
        area.classList.remove('hidden');
        output.value = keys;
    }

    // --- USERS DATA & LOGIC ---
    let users = [
        { id: 1, name: "DarkSlayer", hwid: "BF-34-19-AA-01", ip: "192.168.1.XX", days: 28 },
        { id: 2, name: "AimGod_Pro", hwid: "11-FA-CC-99-22", ip: "45.21.11.XX", days: 365 },
        { id: 3, name: "TestUser01", hwid: "DD-00-11-22-33", ip: "10.0.0.XX", days: 0 },
        { id: 4, name: "MinHooker", hwid: "AA-BB-CC-DD-EE", ip: "127.0.0.1", days: 12 },
    ];

    let currentEditId = null;

    function renderUsers() {
        const tbody = document.getElementById('users-table-body');
        tbody.innerHTML = '';

        users.forEach(u => {
            let statusColor = u.days > 0 ? 'text-green-500' : 'text-red-500';
            let daysText = u.days > 0 ? `${u.days} Days` : 'Expired';

            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><input type="checkbox" class="custom-checkbox user-check" data-id="${u.id}"></td>
                <td>
                    <div class="flex items-center gap-2">
                        <div class="w-6 h-6 rounded bg-[#1c1c1c] flex items-center justify-center text-[10px] text-gray-400 font-bold">${u.name.charAt(0)}</div>
                        <span class="font-medium text-white">${u.name}</span>
                    </div>
                </td>
                <td class="font-mono text-xs text-gray-500">${u.hwid}</td>
                <td class="font-mono text-xs text-gray-500">${u.ip}</td>
                <td class="font-mono text-xs ${statusColor}">${daysText}</td>
                <td class="text-right">
                    <button onclick="openEditModal(${u.id})" class="text-gray-500 hover:text-ka-accent transition-colors p-2" title="Edit Time">
                        <i class="fa-solid fa-pen"></i>
                    </button>
                </td>
            `;
            tbody.appendChild(tr);
        });
    }

    // --- EDIT MODAL LOGIC (TIME ONLY) ---
    function openEditModal(id) {
        const user = users.find(u => u.id === id);
        if(!user) return;

        currentEditId = id;
        document.getElementById('modal-username').innerText = user.name;
        document.getElementById('edit-days-input').value = user.days;
        
        const modal = document.getElementById('edit-modal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

    function closeModal() {
        const modal = document.getElementById('edit-modal');
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        currentEditId = null;
    }

    function saveUserTime() {
        if(currentEditId === null) return;
        
        const newDays = parseInt(document.getElementById('edit-days-input').value);
        const userIndex = users.findIndex(u => u.id === currentEditId);
        
        if(userIndex !== -1) {
            users[userIndex].days = newDays;
            renderUsers();
            closeModal();
        }
    }

    // --- BULK DELETE LOGIC ---
    function toggleSelectAll() {
        const mainCheck = document.getElementById('select-all');
        const checks = document.querySelectorAll('.user-check');
        checks.forEach(c => c.checked = mainCheck.checked);
    }

    function deleteSelected() {
        const checks = document.querySelectorAll('.user-check:checked');
        if(checks.length === 0) return alert('No users selected');

        if(confirm(`Delete ${checks.length} users permanently?`)) {
            const idsToDelete = Array.from(checks).map(c => parseInt(c.getAttribute('data-id')));
            users = users.filter(u => !idsToDelete.includes(u.id));
            document.getElementById('select-all').checked = false;
            renderUsers();
        }
    }

    renderUsers();
</script>
</body>
</html>
